{% extends "layout.html" %} {% block title %}
<title>Manage Package Types</title>
{% endblock %} {% block styles %}
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
{% endblock %} {% block content %}
<div class="container mt-4">
  <!-- Flash Messages -->
  <div>
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %} {% for (category, msg) in messages %}
    <p class="alert alert-{{ category }}">{{ msg }}</p>
    {% endfor %} {% endif %} {% endwith %}
  </div>

  <!-- Package Types Data Section -->
  <h1 class="mb-4" style="color: white">Manage Package Types</h1>

  <!-- Flexbox for buttons with reduced separation -->
  <div
    class="d-flex flex-column flex-sm-row justify-content-sm-start gap-1 mb-3"
  >
    <a
      href="{{ url_for('admindashboard') }}"
      class="btn btn-primary btn-sm me-2 fs-6 py-1"
      >Back to Dashboard</a
    >
    <a
      href="{{ url_for('addpackage_type') }}"
      class="btn btn-primary btn-sm fs-6 py-1"
      >Add New Package Type</a
    >
  </div>

  {% if package_types %}
  <!-- Add table-responsive for scrollable table -->
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead class="thead-dark">
        <tr>
          <th>Package Type ID</th>
          <th>Package Name</th>
          <th>Category ID</th>
          <th>Package ID</th>
          <th>Price</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for package_type in package_types %}
        <tr>
          <td>{{ package_type['packagetypeid'] }}</td>
          <td>{{ package_type['packagetypename'] }}</td>
          <td>{{ package_type['categoryid'] }}</td>
          <td>{{ package_type['packagesid'] }}</td>
          <td>${{ package_type['price'] }}</td>
          <td>
            <!-- Edit and Delete buttons, make them responsive -->
            <div class="d-flex flex-column flex-sm-row gap-1">
              <!-- Edit Button -->
              <a
                href="{{ url_for('editpackage_types', packagetypeid=package_type['packagetypeid']) }}"
                class="btn btn-primary btn-sm me-2 fs-6 py-1"
              >
                <i class="fas fa-edit"></i> Edit
              </a>
              <!-- Delete Button -->
              <form
                action="{{ url_for('delete_package_types', packagetypeid=package_type['packagetypeid']) }}"
                method="post"
                style="display: inline"
              >
                <button
                  type="submit"
                  class="btn btn-danger btn-sm fs-6 py-1"
                  onclick="return confirm('Are you sure you want to delete this package type?');"
                >
                  <i class="fas fa-trash"></i> Delete
                </button>
              </form>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Pagination Section -->
  <div class="pagination mt-4">
    {% if total_pages > 1 %}
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center">
        <!-- Previous Page Link -->
        {% if current_page > 1 %}
        <li class="page-item">
          <a
            class="page-link"
            href="{{ url_for('viewpackage_types', page=current_page - 1) }}"
            aria-label="Previous"
          >
            <span aria-hidden="true">&laquo; Previous</span>
          </a>
        </li>
        {% else %}
        <li class="page-item disabled">
          <a class="page-link" href="#" tabindex="-1" aria-disabled="true"
            >&laquo; Previous</a
          >
        </li>
        {% endif %}

        <!-- Page Links -->
        {% for page in page_range %}
        <li class="page-item {% if page == current_page %}active{% endif %}">
          <a
            class="page-link"
            href="{{ url_for('viewpackage_types', page=page) }}"
            >{{ page }}</a
          >
        </li>
        {% endfor %}

        <!-- Next Page Link -->
        {% if current_page < total_pages %}
        <li class="page-item">
          <a
            class="page-link"
            href="{{ url_for('viewpackage_types', page=current_page + 1) }}"
            aria-label="Next"
          >
            <span aria-hidden="true">Next &raquo;</span>
          </a>
        </li>
        {% else %}
        <li class="page-item disabled">
          <a class="page-link" href="#" tabindex="-1" aria-disabled="true"
            >Next &raquo;</a
          >
        </li>
        {% endif %}
      </ul>
    </nav>
    {% endif %}
  </div>
  {% else %}
  <p>No package types found.</p>
  {% endif %}
</div>
{% endblock %}
