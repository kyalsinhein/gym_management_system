{% extends "layout.html" %} {% block title %}
<title>Manage Trainers</title>
{% endblock %} {% block styles %}
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
{% endblock %} {% block content %}
<div class="container mt-4">
  <!-- Flash Messages -->
  <div>
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %} {% for category, msg in messages %}
    <p class="alert alert-{{ category }}">{{ msg }}</p>
    {% endfor %} {% endif %} {% endwith %}
  </div>

  <!-- Trainer Data Section -->
  <h1 class="mb-4" style="color: white">Manage Trainers</h1>

  <!-- Action Buttons (Aligned on the same line and responsive) -->
  <div class="button-container d-flex mb-3">
    <a
      href="{{ url_for('admindashboard') }}"
      class="btn btn-primary mt-3 user-action-btn"
      style="margin-right: 10px"
    >
      Back to Dashboard
    </a>
    <a
      href="{{ url_for('addtrainers') }}"
      class="btn btn-primary mt-3 user-action-btn"
    >
      Add New Trainer
    </a>
  </div>

  <!-- Trainers Table -->
  {% if trainers %}
  <div class="table-responsive" style="overflow-x: auto">
    <table class="table table-bordered table-striped">
      <thead class="thead-dark">
        <tr>
          <th>Trainer ID</th>
          <th>Name</th>
          <th>Age</th>
          <th>Weight</th>
          <th>Height</th>
          <th>Occupation</th>
          <th>Description</th>
          <th>Photo</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for trainer in trainers %}
        <tr>
          <td>{{ trainer['trainerid'] }}</td>
          <td>{{ trainer['trainername'] }}</td>
          <td>{{ trainer['age'] }}</td>
          <td>{{ trainer['weight'] }} kg</td>
          <td>{{ trainer['height'] }} cm</td>
          <td>{{ trainer['occupation'] }}</td>
          <td
            style="
              max-width: 200px;
              word-wrap: break-word;
              overflow-wrap: break-word;
              white-space: normal;
            "
          >
            {{ trainer['description'] }}
          </td>
          <td>
            {% if trainer['photo'] %}
            <img
              src="{{ url_for('static', filename='photos/' + trainer['photo']) }}"
              alt="Trainer Photo"
              style="width: 50px; height: 50px; object-fit: cover"
            />
            {% else %} No image available {% endif %}
          </td>
          <td>
            <!-- Button Group for Edit and Delete -->
            <div style="display: flex; gap: 10px">
              <!-- Edit Button -->
              <a
                href="{{ url_for('edittrainers', trainerid=trainer['trainerid']) }}"
                class="btn btn-primary btn-sm user-action-btn"
              >
                <i class="fas fa-edit"></i><span class="d-inline"> Edit</span>
              </a>
              <!-- Delete Button -->
              <form
                action="{{ url_for('deletetrainers', trainerid=trainer['trainerid']) }}"
                method="post"
                style="display: inline"
              >
                <button
                  type="submit"
                  class="btn btn-danger btn-sm user-action-btn"
                  onclick="return confirm('Are you sure you want to delete this trainer?');"
                >
                  <i class="fas fa-trash"></i
                  ><span class="d-inline"> Delete</span>
                </button>
              </form>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Pagination Section -->
  <div class="pagination mt-4">
    {% if total_pages > 1 %}
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center">
        <!-- Previous Page -->
        <li class="page-item {% if current_page == 1 %}disabled{% endif %}">
          <a
            class="page-link"
            href="{{ url_for('viewtrainers', page=current_page - 1) }}"
            aria-label="Previous"
          >
            <span aria-hidden="true">&laquo; Previous</span>
          </a>
        </li>

        <!-- Page Range -->
        {% for page in page_range %}
        <li class="page-item {% if page == current_page %}active{% endif %}">
          <a class="page-link" href="{{ url_for('viewtrainers', page=page) }}"
            >{{ page }}</a
          >
        </li>
        {% endfor %}

        <!-- Next Page -->
        <li
          class="page-item {% if current_page == total_pages %}disabled{% endif %}"
        >
          <a
            class="page-link"
            href="{{ url_for('viewtrainers', page=current_page + 1) }}"
            aria-label="Next"
          >
            <span aria-hidden="true">Next &raquo;</span>
          </a>
        </li>
      </ul>
    </nav>
    {% endif %}
  </div>

  {% else %}
  <p class="text-white">No trainers found.</p>
  {% endif %}
</div>

{% endblock %}

<style>
  /* Static button design for consistency */
  .user-action-btn {
    border-radius: 5px;
    padding: 7px 20px;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
  }

  /* Default icon size */
  .user-action-btn i {
    font-size: 18px;
    margin-right: 8px;
  }

  .user-action-btn span {
    font-size: 14px;
  }

  /* Responsive Styles for Medium and Small Screens */
  @media (max-width: 768px) {
    .user-action-btn i {
      font-size: 14px !important; /* Smaller icon size on medium screens */
    }

    .user-action-btn span {
      font-size: 12px !important; /* Smaller text on medium screens */
    }

    .user-action-btn {
      padding: 5px 12px !important; /* Reduce padding on medium screens */
    }
  }

  @media (max-width: 576px) {
    .user-action-btn i {
      font-size: 12px !important; /* Even smaller icon size on small screens */
    }

    .user-action-btn span {
      font-size: 10px !important; /* Even smaller text on small screens */
    }

    .user-action-btn {
      padding: 3px 6px !important; /* Much smaller padding on small screens */
      font-size: 10px !important; /* Smaller font size on small screens */
    }
  }

  /* Table responsive scrollbar */
  .table-responsive {
    overflow-x: auto; /* Ensures horizontal scroll on smaller screens */
  }
</style>
